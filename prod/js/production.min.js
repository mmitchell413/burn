!function(a){"object"==typeof exports&&"undefined"!=typeof module?module.exports=a():"function"==typeof define&&define.amd?define([],a):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).jsmediatags=a()}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw i=Error("Cannot find module '"+g+"'"),i.code="MODULE_NOT_FOUND",i}i=c[g]={exports:{}},b[g][0].call(i.exports,function(a){var c=b[g][1][a];return e(c?c:a)},i,i.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){},{}],2:[function(a,b,c){b.exports=XMLHttpRequest},{}],3:[function(a,b,c){function d(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();a=function(a){function b(a){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var c;if(c=Object.getPrototypeOf(b).call(this),!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c=!c||"object"!=typeof c&&"function"!=typeof c?this:c,c._array=a,c._size=a.length,c._isInitialized=!0,c}return d(b,a),e(b,[{key:"init",value:function(a){setTimeout(a.onSuccess,0)}},{key:"loadRange",value:function(a,b){setTimeout(b.onSuccess,0)}},{key:"getByteAt",value:function(a){return this._array[a]}}],[{key:"canReadFile",value:function(a){return Array.isArray(a)||"function"==typeof Buffer&&Buffer.isBuffer(a)}}]),b}(a("./MediaFileReader")),b.exports=a},{"./MediaFileReader":10}],4:[function(a,b,c){function d(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=a("./ChunkedFileData");a=function(a){function b(a){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var c;if(c=Object.getPrototypeOf(b).call(this),!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c=!c||"object"!=typeof c&&"function"!=typeof c?this:c,c._blob=a,c._fileData=new f,c}return d(b,a),e(b,[{key:"_init",value:function(a){this._size=this._blob.size,setTimeout(a.onSuccess,1)}},{key:"loadRange",value:function(a,b){var c=this,d=(this._blob.slice||this._blob.mozSlice||this._blob.webkitSlice).call(this._blob,a[0],a[1]+1),e=new FileReader;e.onloadend=function(d){d=new Uint8Array(e.result),c._fileData.addData(a[0],d),b.onSuccess()},e.onerror=e.onabort=function(a){b.onError&&b.onError({type:"blob",info:e.error})},e.readAsArrayBuffer(d)}},{key:"getByteAt",value:function(a){return this._fileData.getByteAt(a)}}],[{key:"canReadFile",value:function(a){return"undefined"!=typeof Blob&&a instanceof Blob||"undefined"!=typeof File&&a instanceof File}}]),b}(a("./MediaFileReader")),b.exports=a},{"./ChunkedFileData":5,"./MediaFileReader":10}],5:[function(a,b,c){var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();a=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this._fileData=[]}return d(a,null,[{key:"NOT_FOUND",get:function(){return-1}}]),d(a,[{key:"addData",value:function(a,b){var c=a+b.length-1,d=this._getChunkRange(a,c);if(-1===d.startIx)this._fileData.splice(d.insertIx||0,0,{offset:a,data:b});else{var e=this._fileData[d.startIx],f=this._fileData[d.endIx],c=c<f.offset+f.data.length-1,g={offset:Math.min(a,e.offset),data:b};a>e.offset&&(e=this._sliceData(e.data,0,a-e.offset),g.data=this._concatData(e,b)),c&&(e=this._sliceData(g.data,0,f.offset-g.offset),g.data=this._concatData(e,f.data)),this._fileData.splice(d.startIx,d.endIx-d.startIx+1,g)}}},{key:"_concatData",value:function(a,b){if("undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView(a)){var c=new a.constructor(a.length+b.length);return c.set(a,0),c.set(b,a.length),c}return a.concat(b)}},{key:"_sliceData",value:function(a,b,c){return a.slice?a.slice(b,c):a.subarray(b,c)}},{key:"_getChunkRange",value:function(a,b){for(var c=-1,d=-1,e=0,f=0;f<this._fileData.length;f++,e=f){var g=this._fileData[f].offset,h=g+this._fileData[f].data.length;if(b<g-1)break;if(a<=h+1&&b>=g-1){c=f;break}}if(-1===c)return{startIx:-1,endIx:-1,insertIx:e};for(f=c;f<this._fileData.length&&(g=this._fileData[f].offset,h=g+this._fileData[f].data.length,b>=g-1&&(d=f),!(b<=h+1));f++);return-1===d&&(d=c),{startIx:c,endIx:d}}},{key:"hasDataRange",value:function(a,b){for(var c=0;c<this._fileData.length;c++){var d=this._fileData[c];if(b<d.offset)break;if(a>=d.offset&&b<d.offset+d.data.length)return!0}return!1}},{key:"getByteAt",value:function(a){for(var b,c=0;c<this._fileData.length;c++){var d=this._fileData[c].offset,e=d+this._fileData[c].data.length-1;if(a>=d&&a<=e){b=this._fileData[c];break}}if(b)return b.data[a-b.offset];throw Error("Offset "+a+" hasn't been loaded yet.")}}]),a}(),b.exports=a},{}],6:[function(a,b,c){function d(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();c=a("./MediaTagReader"),a("./MediaFileReader"),a=function(a){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var a=Object.getPrototypeOf(b).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?this:a}return d(b,a),e(b,[{key:"_loadData",value:function(a,b){var c=a.getSize();a.loadRange([c-128,c-1],b)}},{key:"_parseData",value:function(a,b){var c=a.getSize()-128,d=a.getStringWithCharsetAt(c+3,30).toString(),e=a.getStringWithCharsetAt(c+33,30).toString(),g=a.getStringWithCharsetAt(c+63,30).toString(),h=a.getStringWithCharsetAt(c+93,4).toString(),i=a.getByteAt(c+97+28),j=a.getByteAt(c+97+29);if(0==i&&0!=j)var i="1.1",k=a.getStringWithCharsetAt(c+97,28).toString();else i="1.0",k=a.getStringWithCharsetAt(c+97,30).toString(),j=0;return c=a.getByteAt(c+97+30),d={type:"ID3",version:i,tags:{title:d,artist:e,album:g,year:h,comment:k,genre:255>c?f[c]:""}},j&&(d.tags.track=j),d}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:-128,length:128}}},{key:"canReadTagFormat",value:function(a){return"TAG"===String.fromCharCode.apply(String,a.slice(0,3))}}]),b}(c);var f="Blues;Classic Rock;Country;Dance;Disco;Funk;Grunge;Hip-Hop;Jazz;Metal;New Age;Oldies;Other;Pop;R&B;Rap;Reggae;Rock;Techno;Industrial;Alternative;Ska;Death Metal;Pranks;Soundtrack;Euro-Techno;Ambient;Trip-Hop;Vocal;Jazz+Funk;Fusion;Trance;Classical;Instrumental;Acid;House;Game;Sound Clip;Gospel;Noise;AlternRock;Bass;Soul;Punk;Space;Meditative;Instrumental Pop;Instrumental Rock;Ethnic;Gothic;Darkwave;Techno-Industrial;Electronic;Pop-Folk;Eurodance;Dream;Southern Rock;Comedy;Cult;Gangsta;Top 40;Christian Rap;Pop/Funk;Jungle;Native American;Cabaret;New Wave;Psychadelic;Rave;Showtunes;Trailer;Lo-Fi;Tribal;Acid Punk;Acid Jazz;Polka;Retro;Musical;Rock & Roll;Hard Rock;Folk;Folk-Rock;National Folk;Swing;Fast Fusion;Bebob;Latin;Revival;Celtic;Bluegrass;Avantgarde;Gothic Rock;Progressive Rock;Psychedelic Rock;Symphonic Rock;Slow Rock;Big Band;Chorus;Easy Listening;Acoustic;Humour;Speech;Chanson;Opera;Chamber Music;Sonata;Symphony;Booty Bass;Primus;Porn Groove;Satire;Slow Jam;Club;Tango;Samba;Folklore;Ballad;Power Ballad;Rhythmic Soul;Freestyle;Duet;Punk Rock;Drum Solo;Acapella;Euro-House;Dance Hall".split(";");b.exports=a},{"./MediaFileReader":10,"./MediaTagReader":11}],7:[function(a,b,c){function d(a){var b;switch(a){case 0:b="iso-8859-1";break;case 1:b="utf-16";break;case 2:b="utf-16be";break;case 3:b="utf-8"}return b}function e(a,b,c,d){return d=c.getStringWithCharsetAt(a+1,b-1,d),a=c.getStringWithCharsetAt(a+1+d.bytesReadCount,b-1-d.bytesReadCount),{user_description:d.toString(),data:a.toString()}}var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();a("./MediaFileReader");var g=a("./StringUtils"),h=a("./ArrayFileReader"),i={BUF:"Recommended buffer size",CNT:"Play counter",COM:"Comments",CRA:"Audio encryption",CRM:"Encrypted meta frame",ETC:"Event timing codes",EQU:"Equalization",GEO:"General encapsulated object",IPL:"Involved people list",LNK:"Linked information",MCI:"Music CD Identifier",MLL:"MPEG location lookup table",PIC:"Attached picture",POP:"Popularimeter",REV:"Reverb",RVA:"Relative volume adjustment",SLT:"Synchronized lyric/text",STC:"Synced tempo codes",TAL:"Album/Movie/Show title",TBP:"BPM (Beats Per Minute)",TCM:"Composer",TCO:"Content type",TCR:"Copyright message",TDA:"Date",TDY:"Playlist delay",TEN:"Encoded by",TFT:"File type",TIM:"Time",TKE:"Initial key",TLA:"Language(s)",TLE:"Length",TMT:"Media type",TOA:"Original artist(s)/performer(s)",TOF:"Original filename",TOL:"Original Lyricist(s)/text writer(s)",TOR:"Original release year",TOT:"Original album/Movie/Show title",TP1:"Lead artist(s)/Lead performer(s)/Soloist(s)/Performing group",TP2:"Band/Orchestra/Accompaniment",TP3:"Conductor/Performer refinement",TP4:"Interpreted, remixed, or otherwise modified by",TPA:"Part of a set",TPB:"Publisher",TRC:"ISRC (International Standard Recording Code)",TRD:"Recording dates",TRK:"Track number/Position in set",TSI:"Size",TSS:"Software/hardware and settings used for encoding",TT1:"Content group description",TT2:"Title/Songname/Content description",TT3:"Subtitle/Description refinement",TXT:"Lyricist/text writer",TXX:"User defined text information frame",TYE:"Year",UFI:"Unique file identifier",ULT:"Unsychronized lyric/text transcription",WAF:"Official audio file webpage",WAR:"Official artist/performer webpage",WAS:"Official audio source webpage",WCM:"Commercial information",WCP:"Copyright/Legal information",WPB:"Publishers official webpage",WXX:"User defined URL link frame",AENC:"Audio encryption",APIC:"Attached picture",ASPI:"Audio seek point index",CHAP:"Chapter",CTOC:"Table of contents",COMM:"Comments",COMR:"Commercial frame",ENCR:"Encryption method registration",EQU2:"Equalisation (2)",EQUA:"Equalization",ETCO:"Event timing codes",GEOB:"General encapsulated object",GRID:"Group identification registration",IPLS:"Involved people list",LINK:"Linked information",MCDI:"Music CD identifier",MLLT:"MPEG location lookup table",OWNE:"Ownership frame",PRIV:"Private frame",PCNT:"Play counter",POPM:"Popularimeter",POSS:"Position synchronisation frame",RBUF:"Recommended buffer size",RVA2:"Relative volume adjustment (2)",RVAD:"Relative volume adjustment",RVRB:"Reverb",SEEK:"Seek frame",SYLT:"Synchronized lyric/text",SYTC:"Synchronized tempo codes",TALB:"Album/Movie/Show title",TBPM:"BPM (beats per minute)",TCOM:"Composer",TCON:"Content type",TCOP:"Copyright message",TDAT:"Date",TDLY:"Playlist delay",TDRC:"Recording time",TDRL:"Release time",TDTG:"Tagging time",TENC:"Encoded by",TEXT:"Lyricist/Text writer",TFLT:"File type",TIME:"Time",TIPL:"Involved people list",TIT1:"Content group description",TIT2:"Title/songname/content description",TIT3:"Subtitle/Description refinement",TKEY:"Initial key",TLAN:"Language(s)",TLEN:"Length",TMCL:"Musician credits list",TMED:"Media type",TMOO:"Mood",TOAL:"Original album/movie/show title",TOFN:"Original filename",TOLY:"Original lyricist(s)/text writer(s)",TOPE:"Original artist(s)/performer(s)",TORY:"Original release year",TOWN:"File owner/licensee",TPE1:"Lead performer(s)/Soloist(s)",TPE2:"Band/orchestra/accompaniment",TPE3:"Conductor/performer refinement",TPE4:"Interpreted, remixed, or otherwise modified by",TPOS:"Part of a set",TPRO:"Produced notice",TPUB:"Publisher",TRCK:"Track number/Position in set",TRDA:"Recording dates",TRSN:"Internet radio station name",TRSO:"Internet radio station owner",TSOA:"Album sort order",TSOP:"Performer sort order",TSOT:"Title sort order",TSIZ:"Size",TSRC:"ISRC (international standard recording code)",TSSE:"Software/Hardware and settings used for encoding",TSST:"Set subtitle",TYER:"Year",TXXX:"User defined text information frame",UFID:"Unique file identifier",USER:"Terms of use",USLT:"Unsychronized lyric/text transcription",WCOM:"Commercial information",WCOP:"Copyright/Legal information",WOAF:"Official audio file webpage",WOAR:"Official artist/performer webpage",WOAS:"Official audio source webpage",WORS:"Official internet radio station homepage",WPAY:"Payment",WPUB:"Publishers official webpage",WXXX:"User defined URL link frame"};a=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function")}return f(a,null,[{key:"getFrameReaderFunction",value:function(a){return a in j?j[a]:"T"===a[0]?j["T*"]:"W"===a[0]?j["W*"]:null}},{key:"readFrames",value:function(b,c,d,e,f){for(var g={};b<c;){var h=this._readFrameHeader(d,b,e),i=h.id;if(!i)break;var j=h.flags,k=h.size,l=b+h.headerSize,m=d;b+=h.headerSize+h.size,f&&-1===f.indexOf(i)||(j&&j.format.unsynchronisation&&(m=this.getUnsyncFileReader(m,l,k),l=0,k=m.getSize()),j&&j.format.data_length_indicator&&(l+=4,k-=4),j=(h=a.getFrameReaderFunction(i))?h.apply(this,[l,k,m,j,e]):null,l=this._getFrameDescription(i),k={id:i,size:k,description:l,data:j},i in g?(g[i].id&&(g[i]=[g[i]]),g[i].push(k)):g[i]=k)}return g}},{key:"_readFrameHeader",value:function(a,b,c){c=c.major;var d=null;switch(c){case 2:var e=a.getStringAt(b,3),f=a.getInteger24At(b+3,!0),g=6;break;case 3:e=a.getStringAt(b,4),f=a.getLongAt(b+4,!0),g=10;break;case 4:e=a.getStringAt(b,4),f=a.getSynchsafeInteger32At(b+4),g=10}return e!=String.fromCharCode(0,0,0)&&e!=String.fromCharCode(0,0,0,0)||(e=""),e&&2<c&&(d=this._readFrameFlags(a,b+8)),{id:e||"",size:f||0,headerSize:g||0,flags:d}}},{key:"_readFrameFlags",value:function(a,b){return{message:{tag_alter_preservation:a.isBitSetAt(b,6),file_alter_preservation:a.isBitSetAt(b,5),read_only:a.isBitSetAt(b,4)},format:{grouping_identity:a.isBitSetAt(b+1,7),compression:a.isBitSetAt(b+1,3),encryption:a.isBitSetAt(b+1,2),unsynchronisation:a.isBitSetAt(b+1,1),data_length_indicator:a.isBitSetAt(b+1,0)}}}},{key:"_getFrameDescription",value:function(a){return a in i?i[a]:"Unknown"}},{key:"getUnsyncFileReader",value:function(a,b,c){for(a=a.getBytesAt(b,c),b=0;b<a.length-1;b++)255===a[b]&&0===a[b+1]&&a.splice(b+1,1);return new h(a)}}]),a}();var j={APIC:function(a,b,c,e,f){e=a;var g=d(c.getByteAt(a));switch(f&&f.major){case 2:f=c.getStringAt(a+1,3),a+=4;break;case 3:case 4:f=c.getStringWithCharsetAt(a+1,b-1),a+=1+f.bytesReadCount;break;default:throw Error("Couldn't read ID3v2 major version.")}var h=c.getByteAt(a,1),h=k[h],g=c.getStringWithCharsetAt(a+1,b-(a-e)-1,g);return a+=1+g.bytesReadCount,{format:f.toString(),type:h,description:g.toString(),data:c.getBytesAt(a,e+b-a)}},CHAP:function(a,b,c,d,e){d=a;var f={},h=g.readNullTerminatedString(c.getBytesAt(a,b));return f.id=h.toString(),a+=h.bytesReadCount,f.startTime=c.getLongAt(a,!0),a+=4,f.endTime=c.getLongAt(a,!0),a+=4,f.startOffset=c.getLongAt(a,!0),a+=4,f.endOffset=c.getLongAt(a,!0),a+=4,f.subFrames=this.readFrames(a,a+(b-(a-d)),c,e),f},CTOC:function(a,b,c,d,e){d=a;var f={childElementIds:[]},h=g.readNullTerminatedString(c.getBytesAt(a,b));for(f.id=h.toString(),a+=h.bytesReadCount,f.topLevel=c.isBitSetAt(a,1),f.ordered=c.isBitSetAt(a,0),a++,f.entryCount=c.getByteAt(a),a++,h=0;h<f.entryCount;h++){var i=g.readNullTerminatedString(c.getBytesAt(a,b));f.childElementIds.push(i.toString()),a+=i.bytesReadCount}return f.subFrames=this.readFrames(a,a+(b-(a-d)),c,e),f},COMM:function(a,b,c,e,f){var g=a,h=d(c.getByteAt(a));return e=c.getStringAt(a+1,3),f=c.getStringWithCharsetAt(a+4,b-4,h),a+=4+f.bytesReadCount,a=c.getStringWithCharsetAt(a,g+b-a,h),{language:e,short_description:f.toString(),text:a.toString()}}};j.COM=j.COMM,j.PIC=function(a,b,c,d,e){return j.APIC(a,b,c,d,e)},j.PCNT=function(a,b,c,d,e){return c.getLongAt(a,!1)},j.CNT=j.PCNT,j["T*"]=function(a,b,c,e,f){return e=d(c.getByteAt(a)),c.getStringWithCharsetAt(a+1,b-1,e).toString()},j.TXXX=function(a,b,c,f,g){return f=d(c.getByteAt(a)),e(a,b,c,f)},j["W*"]=function(a,b,c,f,g){return f=d(c.getByteAt(a)),void 0!==f?e(a,b,c,f):c.getStringWithCharsetAt(a,b,f).toString()},j.TCON=function(a,b,c,d){return j["T*"].apply(this,arguments).replace(/^\(\d+\)/,"")},j.TCO=j.TCON,j.USLT=function(a,b,c,e,f){var g=a,h=d(c.getByteAt(a));return e=c.getStringAt(a+1,3),f=c.getStringWithCharsetAt(a+4,b-4,h),a+=4+f.bytesReadCount,a=c.getStringWithCharsetAt(a,g+b-a,h),{language:e,descriptor:f.toString(),lyrics:a.toString()}},j.ULT=j.USLT;var k="Other;32x32 pixels 'file icon' (PNG only);Other file icon;Cover (front);Cover (back);Leaflet page;Media (e.g. label side of CD);Lead artist/lead performer/soloist;Artist/performer;Conductor;Band/Orchestra;Composer;Lyricist/text writer;Recording Location;During recording;During performance;Movie/video screen capture;A bright coloured fish;Illustration;Band/artist logotype;Publisher/Studio logotype".split(";");b.exports=a},{"./ArrayFileReader":3,"./MediaFileReader":10,"./StringUtils":12}],8:[function(a,b,c){function d(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();c=a("./MediaTagReader"),a("./MediaFileReader");var f=a("./ID3v2FrameReader");a=function(a){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var a=Object.getPrototypeOf(b).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?this:a}return d(b,a),e(b,[{key:"_loadData",value:function(a,b){a.loadRange([6,9],{onSuccess:function(){a.loadRange([0,10+a.getSynchsafeInteger32At(6)-1],b)},onError:b.onError})}},{key:"_parseData",value:function(a,b){var c=0,d=a.getByteAt(c+3);if(4<d)return{type:"ID3",version:">2.4",tags:{}};var e=a.getByteAt(c+4),h=a.isBitSetAt(c+5,7),i=a.isBitSetAt(c+5,6),j=a.isBitSetAt(c+5,5),k=a.getSynchsafeInteger32At(c+6),c=c+10;if(i)var l=a.getLongAt(c,!0),c=c+(l+4);if(d={type:"ID3",version:"2."+d+"."+e,major:d,revision:e,flags:{unsynchronisation:h,extended_header:i,experimental_indicator:j,footer_present:!1},size:k,tags:{}},b)var m=this._expandShortcutTags(b);e=k+10,d.flags.unsynchronisation&&(a=f.getUnsyncFileReader(a,c,k),c=0,e=a.getSize());var n,c=f.readFrames(c,e,a,d,m);for(n in g)g.hasOwnProperty(n)&&(k=this._getFrameData(c,g[n]))&&(d.tags[n]=k);for(var o in c)c.hasOwnProperty(o)&&(d.tags[o]=c[o]);return d}},{key:"_getFrameData",value:function(a,b){for(var c,d=0;c=b[d];d++)if(c in a)return a[c].data}},{key:"getShortcuts",value:function(){return g}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:0,length:10}}},{key:"canReadTagFormat",value:function(a){return"ID3"===String.fromCharCode.apply(String,a.slice(0,3))}}]),b}(c);var g={title:["TIT2","TT2"],artist:["TPE1","TP1"],album:["TALB","TAL"],year:["TYER","TYE"],comment:["COMM","COM"],track:["TRCK","TRK"],genre:["TCON","TCO"],picture:["APIC","PIC"],lyrics:["USLT","ULT"]};b.exports=a},{"./ID3v2FrameReader":7,"./MediaFileReader":10,"./MediaTagReader":11}],9:[function(a,b,c){function d(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();c=a("./MediaTagReader"),a("./MediaFileReader"),a=function(a){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var a=Object.getPrototypeOf(b).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?this:a}return d(b,a),e(b,[{key:"_loadData",value:function(a,b){var c=this;a.loadRange([0,16],{onSuccess:function(){c._loadAtom(a,0,"",b)},onError:b.onError})}},{key:"_loadAtom",value:function(a,b,c,d){if(b>=a.getSize())d.onSuccess();else{var e=this,f=a.getLongAt(b,!0);if(0==f||isNaN(f))d.onSuccess();else{var g=a.getStringAt(b+4,4);if(this._isContainerAtom(g)){"meta"==g&&(b+=4);var h=(c?c+".":"")+g;"moov.udta.meta.ilst"===h?a.loadRange([b,b+f],d):a.loadRange([b+8,b+8+8],{onSuccess:function(){e._loadAtom(a,b+8,h,d)},onError:d.onError})}else a.loadRange([b+f,b+f+8],{onSuccess:function(){e._loadAtom(a,b+f,c,d)},onError:d.onError})}}}},{key:"_isContainerAtom",value:function(a){return 0<=["moov","udta","meta","ilst"].indexOf(a)}},{key:"_canReadAtom",value:function(a){return"----"!==a}},{key:"_parseData",value:function(a,b){var c={};b=this._expandShortcutTags(b),this._readAtom(c,a,0,a.getSize(),b);for(var d in h)if(h.hasOwnProperty(d)){var e=c[h[d]];e&&(c[d]="track"===d?e.data.track:e.data)}return{type:"MP4",ftyp:a.getStringAt(8,4),version:a.getLongAt(12,!0),tags:c}}},{key:"_readAtom",value:function(a,b,c,d,e,f,g){g=void 0===g?"":g+"  ";for(var h=c;h<c+d;){var i=b.getLongAt(h,!0);if(0==i)break;var j=b.getStringAt(h+4,4);if(this._isContainerAtom(j)){"meta"==j&&(h+=4),this._readAtom(a,b,h+8,i-8,e,(f?f+".":"")+j,g);break}(!e||0<=e.indexOf(j))&&"moov.udta.meta.ilst"===f&&this._canReadAtom(j)&&(a[j]=this._readMetadataAtom(b,h)),h+=i}}},{key:"_readMetadataAtom",value:function(a,b){var c,d=a.getLongAt(b,!0),e=a.getStringAt(b+4,4),h=a.getInteger24At(b+16+1,!0),h=f[h];if("trkn"==e)c={track:a.getByteAt(b+16+11),total:a.getByteAt(b+16+13)};else if("disk"==e)c={disk:a.getByteAt(b+16+11),total:a.getByteAt(b+16+13)};else{var i=b+24,j=d-24;switch("covr"===e&&"uint8"===h&&(h="jpeg"),h){case"text":c=a.getStringWithCharsetAt(i,j,"utf-8").toString();break;case"uint8":c=a.getShortAt(i,!1);break;case"int":case"uint":c=("int"==h?1==j?a.getSByteAt:2==j?a.getSShortAt:4==j?a.getSLongAt:a.getLongAt:1==j?a.getByteAt:2==j?a.getShortAt:a.getLongAt).call(a,i+(8==j?4:0),!0);break;case"jpeg":case"png":c={format:"image/"+h,data:a.getBytesAt(i,j)}}}return{id:e,size:d,description:g[e]||"Unknown",data:c}}},{key:"getShortcuts",value:function(){return h}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:0,length:16}}},{key:"canReadTagFormat",value:function(a){return"ftyp"===String.fromCharCode.apply(String,a.slice(4,8))}}]),b}(c);var f={0:"uint8",1:"text",13:"jpeg",14:"png",21:"int",22:"uint"},g={"©alb":"Album","©ART":"Artist",aART:"Album Artist","©day":"Release Date","©nam":"Title","©gen":"Genre",gnre:"Genre",trkn:"Track Number","©wrt":"Composer","©too":"Encoding Tool","©enc":"Encoded By",cprt:"Copyright",covr:"Cover Art","©grp":"Grouping",keyw:"Keywords","©lyr":"Lyrics","©cmt":"Comment",tmpo:"Tempo",cpil:"Compilation",disk:"Disc Number",tvsh:"TV Show Name",tven:"TV Episode ID",tvsn:"TV Season",tves:"TV Episode",tvnn:"TV Network",desc:"Description",ldes:"Long Description",sonm:"Sort Name",soar:"Sort Artist",soaa:"Sort Album",soco:"Sort Composer",sosn:"Sort Show",purd:"Purchase Date",pcst:"Podcast",purl:"Podcast URL",catg:"Category",hdvd:"HD Video",stik:"Media Type",rtng:"Content Rating",pgap:"Gapless Playback",apID:"Purchase Account",sfID:"Country Code",atID:"Artist ID",cnID:"Catalog ID",plID:"Collection ID",geID:"Genre ID","xid ":"Vendor Information",flvr:"Codec Flavor"},h={title:"©nam",artist:"©ART",album:"©alb",year:"©day",comment:"©cmt",track:"trkn",genre:"©gen",picture:"covr",lyrics:"©lyr"};b.exports=a},{"./MediaFileReader":10,"./MediaTagReader":11}],10:[function(a,b,c){var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=a("./StringUtils");a=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this._isInitialized=!1,this._size=0}return d(a,[{key:"init",value:function(a){var b=this;return this._isInitialized?void setTimeout(a.onSuccess,1):this._init({onSuccess:function(){b._isInitialized=!0,a.onSuccess()},onError:a.onError})}},{key:"_init",value:function(a){throw Error("Must implement init function")}},{key:"loadRange",value:function(a,b){throw Error("Must implement loadRange function")}},{key:"getSize",value:function(){if(!this._isInitialized)throw Error("init() must be called first.");return this._size}},{key:"getByteAt",value:function(a){throw Error("Must implement getByteAt function")}},{key:"getBytesAt",value:function(a,b){for(var c=Array(b),d=0;d<b;d++)c[d]=this.getByteAt(a+d);return c}},{key:"isBitSetAt",value:function(a,b){return 0!=(this.getByteAt(a)&1<<b)}},{key:"getSByteAt",value:function(a){return a=this.getByteAt(a),127<a?a-256:a}},{key:"getShortAt",value:function(a,b){var c=b?(this.getByteAt(a)<<8)+this.getByteAt(a+1):(this.getByteAt(a+1)<<8)+this.getByteAt(a);return 0>c&&(c+=65536),c}},{key:"getSShortAt",value:function(a,b){var c=this.getShortAt(a,b);return 32767<c?c-65536:c}},{key:"getLongAt",value:function(a,b){var c=this.getByteAt(a),d=this.getByteAt(a+1),e=this.getByteAt(a+2),f=this.getByteAt(a+3),c=b?(((c<<8)+d<<8)+e<<8)+f:(((f<<8)+e<<8)+d<<8)+c;return 0>c&&(c+=4294967296),c}},{key:"getSLongAt",value:function(a,b){var c=this.getLongAt(a,b);return 2147483647<c?c-4294967296:c}},{key:"getInteger24At",value:function(a,b){var c=this.getByteAt(a),d=this.getByteAt(a+1),e=this.getByteAt(a+2),c=b?((c<<8)+d<<8)+e:((e<<8)+d<<8)+c;return 0>c&&(c+=16777216),c}},{key:"getStringAt",value:function(a,b){for(var c=[],d=a,e=0;d<a+b;d++,e++)c[e]=String.fromCharCode(this.getByteAt(d));return c.join("")}},{key:"getStringWithCharsetAt",value:function(a,b,c){switch(a=this.getBytesAt(a,b),(c||"").toLowerCase()){case"utf-16":case"utf-16le":case"utf-16be":c=e.readUTF16String(a,"utf-16be"===c);break;case"utf-8":c=e.readUTF8String(a);break;default:c=e.readNullTerminatedString(a)}return c}},{key:"getCharAt",value:function(a){return String.fromCharCode(this.getByteAt(a))}},{key:"getSynchsafeInteger32At",value:function(a){var b=this.getByteAt(a),c=this.getByteAt(a+1),d=this.getByteAt(a+2);return 127&this.getByteAt(a+3)|(127&d)<<7|(127&c)<<14|(127&b)<<21}}],[{key:"canReadFile",value:function(a){throw Error("Must implement canReadFile function")}}]),a}(),b.exports=a},{"./StringUtils":12}],11:[function(a,b,c){var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();a("./MediaFileReader"),a=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this._mediaFileReader=b,this._tags=null}return d(a,[{key:"setTagsToRead",value:function(a){return this._tags=a,this}},{key:"read",value:function(a){var b=this;this._mediaFileReader.init({onSuccess:function(){b._loadData(b._mediaFileReader,{onSuccess:function(){try{var c=b._parseData(b._mediaFileReader,b._tags)}catch(d){if(a.onError)return void a.onError({type:"parseData",info:d.message})}a.onSuccess(c)},onError:a.onError})},onError:a.onError})}},{key:"getShortcuts",value:function(){return{}}},{key:"_loadData",value:function(a,b){throw Error("Must implement _loadData function")}},{key:"_parseData",value:function(a,b){throw Error("Must implement _parseData function")}},{key:"_expandShortcutTags",value:function(a){if(!a)return null;for(var b,c=[],d=this.getShortcuts(),e=0;b=a[e];e++)c=c.concat(d[b]||[b]);return c}}],[{key:"getTagIdentifierByteRange",value:function(){throw Error("Must implement")}},{key:"canReadTagFormat",value:function(a){throw Error("Must implement")}}]),a}(),b.exports=a},{"./MediaFileReader":10}],12:[function(a,b,c){var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=function(){function a(b,c){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this._value=b,this.bytesReadCount=c,this.length=b.length}return d(a,[{key:"toString",value:function(){return this._value}}]),a}();b.exports={readUTF16String:function(a,b,c){var d=0,f=1,g=0;c=Math.min(c||a.length,a.length),254==a[0]&&255==a[1]?(b=!0,d=2):255==a[0]&&254==a[1]&&(b=!1,d=2),b&&(f=0,g=1),b=[];for(var h=0;d<c;h++){var i=a[d+f],j=(i<<8)+a[d+g],d=d+2;if(0==j)break;216>i||224<=i?b[h]=String.fromCharCode(j):(i=(a[d+f]<<8)+a[d+g],d+=2,b[h]=String.fromCharCode(j,i))}return new e(b.join(""),d)},readUTF8String:function(a,b){var c=0;b=Math.min(b||a.length,a.length),239==a[0]&&187==a[1]&&191==a[2]&&(c=3);for(var d=[],f=0;c<b;f++){var g=a[c++];if(0==g)break;if(128>g)d[f]=String.fromCharCode(g);else if(194<=g&&224>g){var h=a[c++];d[f]=String.fromCharCode(((31&g)<<6)+(63&h))}else if(224<=g&&240>g){var h=a[c++],i=a[c++];d[f]=String.fromCharCode(((255&g)<<12)+((63&h)<<6)+(63&i))}else if(240<=g&&245>g){var h=a[c++],i=a[c++],j=a[c++],g=((7&g)<<18)+((63&h)<<12)+((63&i)<<6)+(63&j)-65536;d[f]=String.fromCharCode((g>>10)+55296,(1023&g)+56320)}}return new e(d.join(""),c)},readNullTerminatedString:function(a,b){var c=[];b=b||a.length;for(var d=0;d<b;){var f=a[d++];if(0==f)break;c[d-1]=String.fromCharCode(f)}return new e(c.join(""),d)}}},{}],13:[function(a,b,c){function d(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),
b}}(),f=a("./ChunkedFileData");c=function(b){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");var b;if(b=Object.getPrototypeOf(c).call(this),!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b=!b||"object"!=typeof b&&"function"!=typeof b?this:b,b._url=a,b._fileData=new f,b}return d(c,b),e(c,[{key:"_init",value:function(a){c._config.avoidHeadRequests?this._fetchSizeWithGetRequest(a):this._fetchSizeWithHeadRequest(a)}},{key:"_fetchSizeWithHeadRequest",value:function(a){var b=this;this._makeXHRRequest("HEAD",null,{onSuccess:function(c){(c=b._parseContentLength(c))?(b._size=c,a.onSuccess()):b._fetchSizeWithGetRequest(a)},onError:a.onError})}},{key:"_fetchSizeWithGetRequest",value:function(a){var b=this,c=this._roundRangeToChunkMultiple([0,0]);this._makeXHRRequest("GET",c,{onSuccess:function(c){var d=b._parseContentRange(c);if(c=b._getXhrResponseContent(c),d){if(null==d.instanceLength)return void b._fetchEntireFile(a);b._size=d.instanceLength}else b._size=c.length;b._fileData.addData(0,c),a.onSuccess()},onError:a.onError})}},{key:"_fetchEntireFile",value:function(a){var b=this;this._makeXHRRequest("GET",null,{onSuccess:function(c){c=b._getXhrResponseContent(c),b._size=c.length,b._fileData.addData(0,c),a.onSuccess()},onError:a.onError})}},{key:"_getXhrResponseContent",value:function(a){return a.responseBody||a.responseText||""}},{key:"_parseContentLength",value:function(a){return a=this._getResponseHeader(a,"Content-Length"),null==a?a:parseInt(a,10)}},{key:"_parseContentRange",value:function(a){if(a=this._getResponseHeader(a,"Content-Range")){var b=a.match(/bytes (\d+)-(\d+)\/(?:(\d+)|\*)/i);if(!b)throw Error("FIXME: Unknown Content-Range syntax: ",a);return{firstBytePosition:parseInt(b[1],10),lastBytePosition:parseInt(b[2],10),instanceLength:b[3]?parseInt(b[3],10):null}}return null}},{key:"loadRange",value:function(a,b){var c=this;c._fileData.hasDataRange(a[0],Math.min(c._size,a[1]))?setTimeout(b.onSuccess,1):(a=this._roundRangeToChunkMultiple(a),a[1]=Math.min(c._size,a[1]),this._makeXHRRequest("GET",a,{onSuccess:function(d){d=c._getXhrResponseContent(d),c._fileData.addData(a[0],d),b.onSuccess()},onError:b.onError}))}},{key:"_roundRangeToChunkMultiple",value:function(a){return[a[0],a[0]+1024*Math.ceil((a[1]-a[0]+1)/1024)-1]}},{key:"_makeXHRRequest",value:function(a,b,d){var e=this._createXHRObject(),f=function(){200===e.status||206===e.status?d.onSuccess(e):d.onError&&d.onError({type:"xhr",info:"Unexpected HTTP status "+e.status+".",xhr:e}),e=null};"undefined"!=typeof e.onload?(e.onload=f,e.onerror=function(){d.onError&&d.onError({type:"xhr",info:"Generic XHR error, check xhr object.",xhr:e})}):e.onreadystatechange=function(){4===e.readyState&&f()},c._config.timeoutInSec&&(e.timeout=1e3*c._config.timeoutInSec,e.ontimeout=function(){d.onError&&d.onError({type:"xhr",info:"Timeout after "+e.timeout/1e3+"s. Use jsmediatags.Config.setXhrTimeout to override.",xhr:e})}),e.open(a,this._url),e.overrideMimeType("text/plain; charset=x-user-defined"),b&&this._setRequestHeader(e,"Range","bytes="+b[0]+"-"+b[1]),this._setRequestHeader(e,"If-Modified-Since","Sat, 01 Jan 1970 00:00:00 GMT"),e.send(null)}},{key:"_setRequestHeader",value:function(a,b,d){0>c._config.disallowedXhrHeaders.indexOf(b.toLowerCase())&&a.setRequestHeader(b,d)}},{key:"_hasResponseHeader",value:function(a,b){var c=a.getAllResponseHeaders();if(!c)return!1;for(var c=c.split("\r\n"),d=[],e=0;e<c.length;e++)d[e]=c[e].split(":")[0].toLowerCase();return 0<=d.indexOf(b.toLowerCase())}},{key:"_getResponseHeader",value:function(a,b){return this._hasResponseHeader(a,b)?a.getResponseHeader(b):null}},{key:"getByteAt",value:function(a){return 255&this._fileData.getByteAt(a).charCodeAt(0)}},{key:"_createXHRObject",value:function(){if("undefined"==typeof window)return new(a("xhr2").XMLHttpRequest);if(window.XMLHttpRequest)return new window.XMLHttpRequest;throw Error("XMLHttpRequest is not supported")}}],[{key:"canReadFile",value:function(a){return"string"==typeof a&&/^[a-z]+:\/\//i.test(a)}},{key:"setConfig",value:function(a){for(var b in a)a.hasOwnProperty(b)&&(this._config[b]=a[b]);for(a=this._config.disallowedXhrHeaders,b=0;b<a.length;b++)a[b]=a[b].toLowerCase()}}]),c}(a("./MediaFileReader")),c._config={avoidHeadRequests:!1,disallowedXhrHeaders:[],timeoutInSec:30},b.exports=c},{"./ChunkedFileData":5,"./MediaFileReader":10,xhr2:2}],14:[function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){var c=0>a.offset&&(-a.offset>b||0<a.offset+a.length);return!(0<=a.offset&&a.offset+a.length>=b||c)}var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();a("./MediaFileReader"),c=a("./NodeFileReader");var g=a("./XhrFileReader"),h=a("./BlobFileReader"),i=a("./ArrayFileReader");a("./MediaTagReader");var j=a("./ID3v1TagReader"),k=a("./ID3v2TagReader");a=a("./MP4TagReader");var l=[],m=[],n=function(){function a(b){d(this,a),this._file=b}return f(a,[{key:"setTagsToRead",value:function(a){return this._tagsToRead=a,this}},{key:"setFileReader",value:function(a){return this._fileReader=a,this}},{key:"setTagReader",value:function(a){return this._tagReader=a,this}},{key:"read",value:function(a){var b=new(this._getFileReader())(this._file),c=this;b.init({onSuccess:function(){c._getTagReader(b,{onSuccess:function(d){new d(b).setTagsToRead(c._tagsToRead).read(a)},onError:a.onError})},onError:a.onError})}},{key:"_getFileReader",value:function(){return this._fileReader?this._fileReader:this._findFileReader()}},{key:"_findFileReader",value:function(){for(var a=0;a<l.length;a++)if(l[a].canReadFile(this._file))return l[a];throw Error("No suitable file reader found for ",this._file)}},{key:"_getTagReader",value:function(a,b){if(this._tagReader){var c=this._tagReader;setTimeout(function(){b.onSuccess(c)},1)}else this._findTagReader(a,b)}},{key:"_findTagReader",value:function(a,b){for(var c=[],d=[],f=a.getSize(),g=0;g<m.length;g++){var h=m[g].getTagIdentifierByteRange();e(h,f)&&(0<=h.offset&&h.offset<f/2||0>h.offset&&h.offset<-f/2?c.push(m[g]):d.push(m[g]))}var i=!1,g={onSuccess:function(){if(i){for(var c=0;c<m.length;c++){var d=m[c].getTagIdentifierByteRange();if(e(d,f)){try{var g=a.getBytesAt(0<=d.offset?d.offset:d.offset+f,d.length)}catch(h){if(b.onError)return void b.onError({type:"fileReader",info:h.message})}if(m[c].canReadTagFormat(g))return void b.onSuccess(m[c])}}b.onError&&b.onError({type:"tagFormat",info:"No suitable tag reader found"})}else i=!0},onError:b.onError};this._loadTagIdentifierRanges(a,c,g),this._loadTagIdentifierRanges(a,d,g)}},{key:"_loadTagIdentifierRanges",value:function(a,b,c){if(0===b.length)setTimeout(c.onSuccess,1);else{for(var d=[Number.MAX_VALUE,0],e=a.getSize(),f=0;f<b.length;f++){var g=b[f].getTagIdentifierByteRange(),h=0<=g.offset?g.offset:g.offset+e,g=h+g.length-1;d[0]=Math.min(h,d[0]),d[1]=Math.max(g,d[1])}a.loadRange(d,c)}}}]),a}(),o=function(){function a(){d(this,a)}return f(a,null,[{key:"addFileReader",value:function(b){return l.push(b),a}},{key:"addTagReader",value:function(b){return m.push(b),a}},{key:"removeTagReader",value:function(b){return b=m.indexOf(b),0<=b&&m.splice(b,1),a}},{key:"EXPERIMENTAL_avoidHeadRequests",value:function(){g.setConfig({avoidHeadRequests:!0})}},{key:"setDisallowedXhrHeaders",value:function(a){g.setConfig({disallowedXhrHeaders:a})}},{key:"setXhrTimeoutInSec",value:function(a){g.setConfig({timeoutInSec:a})}}]),a}();o.addFileReader(g).addFileReader(h).addFileReader(i).addTagReader(k).addTagReader(j).addTagReader(a),"undefined"!=typeof process&&o.addFileReader(c),b.exports={read:function(a,b){new n(a).read(b)},Reader:n,Config:o}},{"./ArrayFileReader":3,"./BlobFileReader":4,"./ID3v1TagReader":6,"./ID3v2TagReader":8,"./MP4TagReader":9,"./MediaFileReader":10,"./MediaTagReader":11,"./NodeFileReader":1,"./XhrFileReader":13}]},{},[14])(14)});var player=$("audio#player").get(0);setInterval(function(){$(".player-title").html(player.currentTime)},1e3),$(".player-play-pause").click(function(a){a.preventDefault(),console.log("Test"),player.paused?(console.log("playing"),player.play()):(console.log("paused"),player.pause())});